<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Rails Routing from the Outside In — Ruby on Rails Guides</title>
<link rel="stylesheet" type="text/css" href="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/style.css">
<link rel="stylesheet" type="text/css" href="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/print.css" media="print">

<link rel="stylesheet" type="text/css" href="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/shCore.css">
<link rel="stylesheet" type="text/css" href="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/shThemeRailsGuides.css">

<link rel="stylesheet" type="text/css" href="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/fixes.css">

<link href="http://guides.rubyonrails.org/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
</head>
<body class="guide">
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">More at <a href="http://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        More Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="http://rubyonrails.org/">Overview</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/download">Download</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/deploy">Deploy</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">Code</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/screencasts">Screencasts</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/documentation">Documentation</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/community">Community</a></li>
        <li class="more-info"><a href="http://weblog.rubyonrails.org/">Blog</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="http://guides.rubyonrails.org/index.html" title="Return to home page">Guides.rubyonrails.org</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="http://guides.rubyonrails.org/index.html">Home</a></li>
        <li class="guides-index guides-index-large">
          <a href="http://guides.rubyonrails.org/index.html" id="guidesMenu" class="guides-index-item nav-item">Guides Index</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr>
              <dl class="L">
                <dt>Start Here</dt>
                <dd><a href="http://guides.rubyonrails.org/getting_started.html">Getting Started with Rails</a></dd>
                <dt>Models</dt>
                <dd><a href="http://guides.rubyonrails.org/active_record_basics.html">Active Record Basics</a></dd>
                <dd><a href="http://guides.rubyonrails.org/active_record_migrations.html">Active Record Migrations</a></dd>
                <dd><a href="http://guides.rubyonrails.org/active_record_validations.html">Active Record Validations</a></dd>
                <dd><a href="http://guides.rubyonrails.org/active_record_callbacks.html">Active Record Callbacks</a></dd>
                <dd><a href="http://guides.rubyonrails.org/association_basics.html">Active Record Associations</a></dd>
                <dd><a href="http://guides.rubyonrails.org/active_record_querying.html">Active Record Query Interface</a></dd>
                <dt>Views</dt>
                <dd><a href="http://guides.rubyonrails.org/layouts_and_rendering.html">Layouts and Rendering in Rails</a></dd>
                <dd><a href="http://guides.rubyonrails.org/form_helpers.html">Action View Form Helpers</a></dd>
                <dt>Controllers</dt>
                <dd><a href="http://guides.rubyonrails.org/action_controller_overview.html">Action Controller Overview</a></dd>
                <dd><a href="http://guides.rubyonrails.org/routing.html">Rails Routing from the Outside In</a></dd>
              </dl>
              <dl class="R">
                <dt>Digging Deeper</dt>
                <dd><a href="http://guides.rubyonrails.org/active_support_core_extensions.html">Active Support Core Extensions</a></dd>
                <dd><a href="http://guides.rubyonrails.org/i18n.html">Rails Internationalization API</a></dd>
                <dd><a href="http://guides.rubyonrails.org/action_mailer_basics.html">Action Mailer Basics</a></dd>
                <dd><a href="http://guides.rubyonrails.org/active_job_basics.html">Active Job Basics</a></dd>
                <dd><a href="http://guides.rubyonrails.org/security.html">Securing Rails Applications</a></dd>
                <dd><a href="http://guides.rubyonrails.org/debugging_rails_applications.html">Debugging Rails Applications</a></dd>
                <dd><a href="http://guides.rubyonrails.org/configuring.html">Configuring Rails Applications</a></dd>
                <dd><a href="http://guides.rubyonrails.org/command_line.html">Rails Command Line Tools and Rake Tasks</a></dd>
                <dd><a href="http://guides.rubyonrails.org/asset_pipeline.html">Asset Pipeline</a></dd>
                <dd><a href="http://guides.rubyonrails.org/working_with_javascript_in_rails.html">Working with JavaScript in Rails</a></dd>
                <dd><a href="http://guides.rubyonrails.org/autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</a></dd>
                <dt>Extending Rails</dt>
                <dd><a href="http://guides.rubyonrails.org/rails_on_rack.html">Rails on Rack</a></dd>
                <dd><a href="http://guides.rubyonrails.org/generators.html">Creating and Customizing Rails Generators</a></dd>
                <dt>Contributing to Ruby on Rails</dt>
                <dd><a href="http://guides.rubyonrails.org/contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</a></dd>
                <dd><a href="http://guides.rubyonrails.org/api_documentation_guidelines.html">API Documentation Guidelines</a></dd>
                <dd><a href="http://guides.rubyonrails.org/ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a></dd>
                <dt>Maintenance Policy</dt>
                <dd><a href="http://guides.rubyonrails.org/maintenance_policy.html">Maintenance Policy</a></dd>
                <dt>Release Notes</dt>
                <dd><a href="http://guides.rubyonrails.org/upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</a></dd>
                <dd><a href="http://guides.rubyonrails.org/4_2_release_notes.html">Ruby on Rails 4.2 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/4_1_release_notes.html">Ruby on Rails 4.1 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/4_0_release_notes.html">Ruby on Rails 4.0 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/3_2_release_notes.html">Ruby on Rails 3.2 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/3_1_release_notes.html">Ruby on Rails 3.1 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/3_0_release_notes.html">Ruby on Rails 3.0 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/2_3_release_notes.html">Ruby on Rails 2.3 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/2_2_release_notes.html">Ruby on Rails 2.2 Release Notes</a></dd>
              </dl>
          </div>
        </li>
        <li><a class="nav-item" href="http://guides.rubyonrails.org/contributing_to_ruby_on_rails.html">Contribute</a></li>
        <li><a class="nav-item" href="http://guides.rubyonrails.org/credits.html">Credits</a></li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">Guides Index</option>
              <optgroup label="Start Here">
                  <option value="getting_started.html">Getting Started with Rails</option>
              </optgroup>
              <optgroup label="Models">
                  <option value="active_record_basics.html">Active Record Basics</option>
                  <option value="active_record_migrations.html">Active Record Migrations</option>
                  <option value="active_record_validations.html">Active Record Validations</option>
                  <option value="active_record_callbacks.html">Active Record Callbacks</option>
                  <option value="association_basics.html">Active Record Associations</option>
                  <option value="active_record_querying.html">Active Record Query Interface</option>
              </optgroup>
              <optgroup label="Views">
                  <option value="layouts_and_rendering.html">Layouts and Rendering in Rails</option>
                  <option value="form_helpers.html">Action View Form Helpers</option>
              </optgroup>
              <optgroup label="Controllers">
                  <option value="action_controller_overview.html">Action Controller Overview</option>
                  <option selected="selected" value="routing.html">Rails Routing from the Outside In</option>
              </optgroup>
              <optgroup label="Digging Deeper">
                  <option value="active_support_core_extensions.html">Active Support Core Extensions</option>
                  <option value="i18n.html">Rails Internationalization API</option>
                  <option value="action_mailer_basics.html">Action Mailer Basics</option>
                  <option value="active_job_basics.html">Active Job Basics</option>
                  <option value="security.html">Securing Rails Applications</option>
                  <option value="debugging_rails_applications.html">Debugging Rails Applications</option>
                  <option value="configuring.html">Configuring Rails Applications</option>
                  <option value="command_line.html">Rails Command Line Tools and Rake Tasks</option>
                  <option value="asset_pipeline.html">Asset Pipeline</option>
                  <option value="working_with_javascript_in_rails.html">Working with JavaScript in Rails</option>
                  <option value="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</option>
              </optgroup>
              <optgroup label="Extending Rails">
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">Creating and Customizing Rails Generators</option>
              </optgroup>
              <optgroup label="Contributing to Ruby on Rails">
                  <option value="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</option>
                  <option value="api_documentation_guidelines.html">API Documentation Guidelines</option>
                  <option value="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</option>
              </optgroup>
              <optgroup label="Maintenance Policy">
                  <option value="maintenance_policy.html">Maintenance Policy</option>
              </optgroup>
              <optgroup label="Release Notes">
                  <option value="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</option>
                  <option value="4_2_release_notes.html">Ruby on Rails 4.2 Release Notes</option>
                  <option value="4_1_release_notes.html">Ruby on Rails 4.1 Release Notes</option>
                  <option value="4_0_release_notes.html">Ruby on Rails 4.0 Release Notes</option>
                  <option value="3_2_release_notes.html">Ruby on Rails 3.2 Release Notes</option>
                  <option value="3_1_release_notes.html">Ruby on Rails 3.1 Release Notes</option>
                  <option value="3_0_release_notes.html">Ruby on Rails 3.0 Release Notes</option>
                  <option value="2_3_release_notes.html">Ruby on Rails 2.3 Release Notes</option>
                  <option value="2_2_release_notes.html">Ruby on Rails 2.2 Release Notes</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide">

  <div id="feature">
    <div class="wrapper">
      <h2>Rails Routing from the Outside In</h2><p>This guide covers the user-facing features of Rails routing.</p><p>After reading this guide, you will know:</p>
<ul>
<li>How to interpret the code in <code>routes.rb</code>.</li>
<li>How to construct your own routes, using either the preferred resourceful style or the <code>match</code> method.</li>
<li>What parameters to expect an action to receive.</li>
<li>How to automatically create paths and URLs using route helpers.</li>
<li>Advanced techniques such as constraints and Rack endpoints.</li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/chapters_icon.gif" alt="">Chapters</h3>
            <ol class="chapters">
<li>
<a href="#the-purpose-of-the-rails-router">The Purpose of the Rails Router</a>

<ul>
<li><a href="#connecting-urls-to-code">Connecting URLs to Code</a></li>
<li><a href="#generating-paths-and-urls-from-code">Generating Paths and URLs from Code</a></li>
</ul>
</li>
<li>
<a href="#resource-routing-the-rails-default">Resource Routing: the Rails Default</a>

<ul>
<li><a href="#resources-on-the-web">Resources on the Web</a></li>
<li><a href="#crud-verbs-and-actions">CRUD, Verbs, and Actions</a></li>
<li><a href="#path-and-url-helpers">Path and URL Helpers</a></li>
<li><a href="#defining-multiple-resources-at-the-same-time">Defining Multiple Resources at the Same Time</a></li>
<li><a href="#singular-resources">Singular Resources</a></li>
<li><a href="#controller-namespaces-and-routing">Controller Namespaces and Routing</a></li>
<li><a href="#nested-resources">Nested Resources</a></li>
<li><a href="#routing-concerns">Routing concerns</a></li>
<li><a href="#creating-paths-and-urls-from-objects">Creating Paths and URLs From Objects</a></li>
<li><a href="#adding-more-restful-actions">Adding More RESTful Actions</a></li>
</ul>
</li>
<li>
<a href="#non-resourceful-routes">Non-Resourceful Routes</a>

<ul>
<li><a href="#bound-parameters">Bound Parameters</a></li>
<li><a href="#dynamic-segments">Dynamic Segments</a></li>
<li><a href="#static-segments">Static Segments</a></li>
<li><a href="#the-query-string">The Query String</a></li>
<li><a href="#defining-defaults">Defining Defaults</a></li>
<li><a href="#naming-routes">Naming Routes</a></li>
<li><a href="#http-verb-constraints">HTTP Verb Constraints</a></li>
<li><a href="#segment-constraints">Segment Constraints</a></li>
<li><a href="#request-based-constraints">Request-Based Constraints</a></li>
<li><a href="#advanced-constraints">Advanced Constraints</a></li>
<li><a href="#route-globbing-and-wildcard-segments">Route Globbing and Wildcard Segments</a></li>
<li><a href="#redirection">Redirection</a></li>
<li><a href="#routing-to-rack-applications">Routing to Rack Applications</a></li>
<li><a href="#using-root">Using <code>root</code></a></li>
<li><a href="#unicode-character-routes">Unicode character routes</a></li>
</ul>
</li>
<li>
<a href="#customizing-resourceful-routes">Customizing Resourceful Routes</a>

<ul>
<li><a href="#specifying-a-controller-to-use">Specifying a Controller to Use</a></li>
<li><a href="#specifying-constraints">Specifying Constraints</a></li>
<li><a href="#overriding-the-named-helpers">Overriding the Named Helpers</a></li>
<li><a href="#overriding-the-new-and-edit-segments">Overriding the <code>new</code> and <code>edit</code> Segments</a></li>
<li><a href="#prefixing-the-named-route-helpers">Prefixing the Named Route Helpers</a></li>
<li><a href="#restricting-the-routes-created">Restricting the Routes Created</a></li>
<li><a href="#translated-paths">Translated Paths</a></li>
<li><a href="#overriding-the-singular-form">Overriding the Singular Form</a></li>
<li><a href="#using-as-in-nested-resources">Using <code>:as</code> in Nested Resources</a></li>
<li><a href="#overriding-named-route-parameters">Overriding Named Route Parameters</a></li>
</ul>
</li>
<li>
<a href="#inspecting-and-testing-routes">Inspecting and Testing Routes</a>

<ul>
<li><a href="#listing-existing-routes">Listing Existing Routes</a></li>
<li><a href="#testing-routes">Testing Routes</a></li>
</ul>
</li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="the-purpose-of-the-rails-router">1 The Purpose of the Rails Router</h3><p>The
 Rails router recognizes URLs and dispatches them to a controller's 
action. It can also generate paths and URLs, avoiding the need to 
hardcode strings in your views.</p><h4 id="connecting-urls-to-code">1.1 Connecting URLs to Code</h4><p>When your Rails application receives an incoming request for:</p><div class="code_container">
<div><div id="highlighter_349925" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">GET /patients/17</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>it asks the router to match it to a controller action. If the first matching route is:</p><div class="code_container">
<div><div id="highlighter_431259" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'/patients/:id'</code><code class="ruby plain">, to: </code><code class="ruby string">'patients#show'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>the request is dispatched to the <code>patients</code> controller's <code>show</code> action with <code>{ id: '17' }</code> in <code>params</code>.</p><h4 id="generating-paths-and-urls-from-code">1.2 Generating Paths and URLs from Code</h4><p>You can also generate paths and URLs. If the route above is modified to be:</p><div class="code_container">
<div><div id="highlighter_764803" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'/patients/:id'</code><code class="ruby plain">, to: </code><code class="ruby string">'patients#show'</code><code class="ruby plain">, as: </code><code class="ruby string">'patient'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>and your application contains this code in the controller:</p><div class="code_container">
<div><div id="highlighter_121912" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby variable bold">@patient</code> <code class="ruby plain">= Patient.find(</code><code class="ruby constants">17</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>and this in the corresponding view:</p><div class="code_container">
<div><div id="highlighter_892652" class="syntaxhighlighter nogutter  htmlscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">link_to </code><code class="ruby string">'Patient Record'</code><code class="ruby plain">, patient_path(</code><code class="ruby variable bold">@patient</code><code class="ruby plain">) </code><code class="ruby script">%&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>then the router will generate the path <code>/patients/17</code>. 
This reduces the brittleness of your view and makes your code easier to 
understand. Note that the id does not need to be specified in the route 
helper.</p><h3 id="resource-routing-the-rails-default">2 Resource Routing: the Rails Default</h3><p>Resource
 routing allows you to quickly declare all of the common routes for a 
given resourceful controller. Instead of declaring separate routes for 
your <code>index</code>, <code>show</code>, <code>new</code>, <code>edit</code>, <code>create</code>, <code>update</code> and <code>destroy</code> actions, a resourceful route declares them in a single line of code.</p><h4 id="resources-on-the-web">2.1 Resources on the Web</h4><p>Browsers request pages from Rails by making a request for a URL using a specific HTTP method, such as <code>GET</code>, <code>POST</code>, <code>PATCH</code>, <code>PUT</code> and <code>DELETE</code>.
 Each method is a request to perform an operation on the resource. A 
resource route maps a number of related requests to actions in a single 
controller.</p><p>When your Rails application receives an incoming request for:</p><div class="code_container">
<div><div id="highlighter_426512" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">DELETE /photos/17</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>it asks the router to map it to a controller action. If the first matching route is:</p><div class="code_container">
<div><div id="highlighter_542648" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Rails would dispatch that request to the <code>destroy</code> method on the <code>photos</code> controller with <code>{ id: '17' }</code> in <code>params</code>.</p><h4 id="crud-verbs-and-actions">2.2 CRUD, Verbs, and Actions</h4><p>In
 Rails, a resourceful route provides a mapping between HTTP verbs and 
URLs to controller actions. By convention, each action also maps to 
particular CRUD operations in a database. A single entry in the routing 
file, such as:</p><div class="code_container">
<div><div id="highlighter_703899" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>creates seven different routes in your application, all mapping to the <code>Photos</code> controller:</p>
<table class="responsive">
<thead>
<tr>
<th>HTTP Verb</th>
<th>Path</th>
<th>Controller#Action</th>
<th>Used for</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/photos</td>
<td>photos#index</td>
<td>display a list of all photos</td>
</tr>
<tr>
<td>GET</td>
<td>/photos/new</td>
<td>photos#new</td>
<td>return an HTML form for creating a new photo</td>
</tr>
<tr>
<td>POST</td>
<td>/photos</td>
<td>photos#create</td>
<td>create a new photo</td>
</tr>
<tr>
<td>GET</td>
<td>/photos/:id</td>
<td>photos#show</td>
<td>display a specific photo</td>
</tr>
<tr>
<td>GET</td>
<td>/photos/:id/edit</td>
<td>photos#edit</td>
<td>return an HTML form for editing a photo</td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td>/photos/:id</td>
<td>photos#update</td>
<td>update a specific photo</td>
</tr>
<tr>
<td>DELETE</td>
<td>/photos/:id</td>
<td>photos#destroy</td>
<td>delete a specific photo</td>
</tr>
</tbody>
</table>
<div class="note"><p>Because the router uses the HTTP verb and URL to match inbound requests, four URLs map to seven different actions.</p></div><div class="note"><p>Rails routes are matched in the order they are specified, so if you have a <code>resources :photos</code> above a <code>get 'photos/poll'</code> the <code>show</code> action's route for the <code>resources</code> line will be matched before the <code>get</code> line. To fix this, move the <code>get</code> line <strong>above</strong> the <code>resources</code> line so that it is matched first.</p></div><h4 id="path-and-url-helpers">2.3 Path and URL Helpers</h4><p>Creating a resourceful route will also expose a number of helpers to the controllers in your application. In the case of <code>resources :photos</code>:</p>
<ul>
<li>
<code>photos_path</code> returns <code>/photos</code>
</li>
<li>
<code>new_photo_path</code> returns <code>/photos/new</code>
</li>
<li>
<code>edit_photo_path(:id)</code> returns <code>/photos/:id/edit</code> (for instance, <code>edit_photo_path(10)</code> returns <code>/photos/10/edit</code>)</li>
<li>
<code>photo_path(:id)</code> returns <code>/photos/:id</code> (for instance, <code>photo_path(10)</code> returns <code>/photos/10</code>)</li>
</ul>
<p>Each of these helpers has a corresponding <code>_url</code> helper (such as <code>photos_url</code>) which returns the same path prefixed with the current host, port and path prefix.</p><h4 id="defining-multiple-resources-at-the-same-time">2.4 Defining Multiple Resources at the Same Time</h4><p>If
 you need to create routes for more than one resource, you can save a 
bit of typing by defining them all with a single call to <code>resources</code>:</p><div class="code_container">
<div><div id="highlighter_436863" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code><code class="ruby plain">, </code><code class="ruby color2">:books</code><code class="ruby plain">, </code><code class="ruby color2">:videos</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This works exactly the same as:</p><div class="code_container">
<div><div id="highlighter_647935" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code></div><div class="line number2 index1 alt1"><code class="ruby plain">resources </code><code class="ruby color2">:books</code></div><div class="line number3 index2 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:videos</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4 id="singular-resources">2.5 Singular Resources</h4><p>Sometimes, you have a resource that clients always look up without referencing an ID. For example, you would like <code>/profile</code> to always show the profile of the currently logged in user. In this case, you can use a singular resource to map <code>/profile</code> (rather than <code>/profile/:id</code>) to the <code>show</code> action:</p><div class="code_container">
<div><div id="highlighter_701889" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'profile'</code><code class="ruby plain">, to: </code><code class="ruby string">'users#show'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Passing a <code>String</code> to <code>get</code> will expect a <code>controller#action</code> format, while passing a <code>Symbol</code> will map directly to an action:</p><div class="code_container">
<div><div id="highlighter_445074" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'profile'</code><code class="ruby plain">, to: </code><code class="ruby color2">:show</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This resourceful route:</p><div class="code_container">
<div><div id="highlighter_761753" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resource </code><code class="ruby color2">:geocoder</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>creates six different routes in your application, all mapping to the <code>Geocoders</code> controller:</p>
<table class="responsive">
<thead>
<tr>
<th>HTTP Verb</th>
<th>Path</th>
<th>Controller#Action</th>
<th>Used for</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/geocoder/new</td>
<td>geocoders#new</td>
<td>return an HTML form for creating the geocoder</td>
</tr>
<tr>
<td>POST</td>
<td>/geocoder</td>
<td>geocoders#create</td>
<td>create the new geocoder</td>
</tr>
<tr>
<td>GET</td>
<td>/geocoder</td>
<td>geocoders#show</td>
<td>display the one and only geocoder resource</td>
</tr>
<tr>
<td>GET</td>
<td>/geocoder/edit</td>
<td>geocoders#edit</td>
<td>return an HTML form for editing the geocoder</td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td>/geocoder</td>
<td>geocoders#update</td>
<td>update the one and only geocoder resource</td>
</tr>
<tr>
<td>DELETE</td>
<td>/geocoder</td>
<td>geocoders#destroy</td>
<td>delete the geocoder resource</td>
</tr>
</tbody>
</table>
<div class="note"><p>Because you might want to use the same controller for a singular route (<code>/account</code>) and a plural route (<code>/accounts/45</code>), singular resources map to plural controllers. So that, for example, <code>resource :photo</code> and <code>resources :photos</code> creates both singular and plural routes that map to the same controller (<code>PhotosController</code>).</p></div><p>A singular resourceful route generates these helpers:</p>
<ul>
<li>
<code>new_geocoder_path</code> returns <code>/geocoder/new</code>
</li>
<li>
<code>edit_geocoder_path</code> returns <code>/geocoder/edit</code>
</li>
<li>
<code>geocoder_path</code> returns <code>/geocoder</code>
</li>
</ul>
<p>As with plural resources, the same helpers ending in <code>_url</code> will also include the host, port and path prefix.</p><div class="warning"><p>A <a href="https://github.com/rails/rails/issues/1769">long-standing bug</a> prevents <code>form_for</code> from working automatically with singular resources. As a workaround, specify the URL for the form directly, like so:</p></div><div class="code_container">
<div><div id="highlighter_728340" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">form_for </code><code class="ruby variable bold">@geocoder</code><code class="ruby plain">, url: geocoder_path </code><code class="ruby keyword">do</code> <code class="ruby plain">|f|</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4 id="controller-namespaces-and-routing">2.6 Controller Namespaces and Routing</h4><p>You
 may wish to organize groups of controllers under a namespace. Most 
commonly, you might group a number of administrative controllers under 
an <code>Admin::</code> namespace. You would place these controllers under the <code>app/controllers/admin</code> directory, and you can group them together in your router:</p><div class="code_container">
<div><div id="highlighter_760038" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">namespace </code><code class="ruby color2">:admin</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:articles</code><code class="ruby plain">, </code><code class="ruby color2">:comments</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will create a number of routes for each of the <code>articles</code> and <code>comments</code> controller. For <code>Admin::ArticlesController</code>, Rails will create:</p>
<table class="responsive">
<thead>
<tr>
<th>HTTP Verb</th>
<th>Path</th>
<th>Controller#Action</th>
<th>Named Helper</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/admin/articles</td>
<td>admin/articles#index</td>
<td>admin_articles_path</td>
</tr>
<tr>
<td>GET</td>
<td>/admin/articles/new</td>
<td>admin/articles#new</td>
<td>new_admin_article_path</td>
</tr>
<tr>
<td>POST</td>
<td>/admin/articles</td>
<td>admin/articles#create</td>
<td>admin_articles_path</td>
</tr>
<tr>
<td>GET</td>
<td>/admin/articles/:id</td>
<td>admin/articles#show</td>
<td>admin_article_path(:id)</td>
</tr>
<tr>
<td>GET</td>
<td>/admin/articles/:id/edit</td>
<td>admin/articles#edit</td>
<td>edit_admin_article_path(:id)</td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td>/admin/articles/:id</td>
<td>admin/articles#update</td>
<td>admin_article_path(:id)</td>
</tr>
<tr>
<td>DELETE</td>
<td>/admin/articles/:id</td>
<td>admin/articles#destroy</td>
<td>admin_article_path(:id)</td>
</tr>
</tbody>
</table>
<p>If you want to route <code>/articles</code> (without the prefix <code>/admin</code>) to <code>Admin::ArticlesController</code>, you could use:</p><div class="code_container">
<div><div id="highlighter_705055" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">scope </code><code class="ruby keyword">module</code><code class="ruby plain">: </code><code class="ruby string">'admin'</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:articles</code><code class="ruby plain">, </code><code class="ruby color2">:comments</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>or, for a single case:</p><div class="code_container">
<div><div id="highlighter_618703" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:articles</code><code class="ruby plain">, </code><code class="ruby keyword">module</code><code class="ruby plain">: </code><code class="ruby string">'admin'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>If you want to route <code>/admin/articles</code> to <code>ArticlesController</code> (without the <code>Admin::</code> module prefix), you could use:</p><div class="code_container">
<div><div id="highlighter_436493" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">scope </code><code class="ruby string">'/admin'</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:articles</code><code class="ruby plain">, </code><code class="ruby color2">:comments</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>or, for a single case:</p><div class="code_container">
<div><div id="highlighter_63423" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:articles</code><code class="ruby plain">, path: </code><code class="ruby string">'/admin/articles'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>In each of these cases, the named routes remain the same as if you did not use <code>scope</code>. In the last case, the following paths map to <code>PostsController</code>:</p>
<table class="responsive">
<thead>
<tr>
<th>HTTP Verb</th>
<th>Path</th>
<th>Controller#Action</th>
<th>Named Helper</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/admin/articles</td>
<td>articles#index</td>
<td>articles_path</td>
</tr>
<tr>
<td>GET</td>
<td>/admin/articles/new</td>
<td>articles#new</td>
<td>new_article_path</td>
</tr>
<tr>
<td>POST</td>
<td>/admin/articles</td>
<td>articles#create</td>
<td>articles_path</td>
</tr>
<tr>
<td>GET</td>
<td>/admin/articles/:id</td>
<td>articles#show</td>
<td>article_path(:id)</td>
</tr>
<tr>
<td>GET</td>
<td>/admin/articles/:id/edit</td>
<td>articles#edit</td>
<td>edit_article_path(:id)</td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td>/admin/articles/:id</td>
<td>articles#update</td>
<td>article_path(:id)</td>
</tr>
<tr>
<td>DELETE</td>
<td>/admin/articles/:id</td>
<td>articles#destroy</td>
<td>article_path(:id)</td>
</tr>
</tbody>
</table>
<div class="info"><p><em>If you need to use a different controller namespace inside a <code>namespace</code> block you can specify an absolute controller path, e.g: <code>get '/foo' =&gt; '/foo#index'</code>.</em></p></div><h4 id="nested-resources">2.7 Nested Resources</h4><p>It's
 common to have resources that are logically children of other 
resources. For example, suppose your application includes these models:</p><div class="code_container">
<div><div id="highlighter_742070" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">Magazine &lt; ActiveRecord::Base</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">has_many </code><code class="ruby color2">:ads</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">Ad &lt; ActiveRecord::Base</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">belongs_to </code><code class="ruby color2">:magazine</code></div><div class="line number7 index6 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Nested routes allow you to capture this relationship in your routing. In this case, you could include this route declaration:</p><div class="code_container">
<div><div id="highlighter_653507" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:magazines</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:ads</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>In addition to the routes for magazines, this declaration will also route ads to an <code>AdsController</code>. The ad URLs require a magazine:</p>
<table class="responsive">
<thead>
<tr>
<th>HTTP Verb</th>
<th>Path</th>
<th>Controller#Action</th>
<th>Used for</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/magazines/:magazine_id/ads</td>
<td>ads#index</td>
<td>display a list of all ads for a specific magazine</td>
</tr>
<tr>
<td>GET</td>
<td>/magazines/:magazine_id/ads/new</td>
<td>ads#new</td>
<td>return an HTML form for creating a new ad belonging to a specific magazine</td>
</tr>
<tr>
<td>POST</td>
<td>/magazines/:magazine_id/ads</td>
<td>ads#create</td>
<td>create a new ad belonging to a specific magazine</td>
</tr>
<tr>
<td>GET</td>
<td>/magazines/:magazine_id/ads/:id</td>
<td>ads#show</td>
<td>display a specific ad belonging to a specific magazine</td>
</tr>
<tr>
<td>GET</td>
<td>/magazines/:magazine_id/ads/:id/edit</td>
<td>ads#edit</td>
<td>return an HTML form for editing an ad belonging to a specific magazine</td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td>/magazines/:magazine_id/ads/:id</td>
<td>ads#update</td>
<td>update a specific ad belonging to a specific magazine</td>
</tr>
<tr>
<td>DELETE</td>
<td>/magazines/:magazine_id/ads/:id</td>
<td>ads#destroy</td>
<td>delete a specific ad belonging to a specific magazine</td>
</tr>
</tbody>
</table>
<p>This will also create routing helpers such as <code>magazine_ads_url</code> and <code>edit_magazine_ad_path</code>. These helpers take an instance of Magazine as the first parameter (<code>magazine_ads_url(@magazine)</code>).</p><h5 id="limits-to-nesting">2.7.1 Limits to Nesting</h5><p>You can nest resources within other nested resources if you like. For example:</p><div class="code_container">
<div><div id="highlighter_621004" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:publishers</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:magazines</code> <code class="ruby keyword">do</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:photos</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number5 index4 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Deeply-nested resources quickly become cumbersome. In this case, for example, the application would recognize paths such as:</p><div class="code_container">
<div><div id="highlighter_932331" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">/publishers/1/magazines/2/photos/3</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The corresponding route helper would be <code>publisher_magazine_photo_url</code>, requiring you to specify objects at all three levels. Indeed, this situation is confusing enough that a popular <a href="http://weblog.jamisbuck.org/2007/2/5/nesting-resources">article</a> by Jamis Buck proposes a rule of thumb for good Rails design:</p><div class="info"><p><em>Resources should never be nested more than 1 level deep.</em></p></div><h5 id="shallow-nesting">2.7.2 Shallow Nesting</h5><p>One
 way to avoid deep nesting (as recommended above) is to generate the 
collection actions scoped under the parent, so as to get a sense of the 
hierarchy, but to not nest the member actions. In other words, to only 
build routes with the minimal amount of information to uniquely identify
 the resource, like this:</p><div class="code_container">
<div><div id="highlighter_728321" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:articles</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:comments</code><code class="ruby plain">, only: [</code><code class="ruby color2">:index</code><code class="ruby plain">, </code><code class="ruby color2">:new</code><code class="ruby plain">, </code><code class="ruby color2">:create</code><code class="ruby plain">]</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1"><code class="ruby plain">resources </code><code class="ruby color2">:comments</code><code class="ruby plain">, only: [</code><code class="ruby color2">:show</code><code class="ruby plain">, </code><code class="ruby color2">:edit</code><code class="ruby plain">, </code><code class="ruby color2">:update</code><code class="ruby plain">, </code><code class="ruby color2">:destroy</code><code class="ruby plain">]</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This idea strikes a balance between descriptive routes and deep 
nesting. There exists shorthand syntax to achieve just that, via the <code>:shallow</code> option:</p><div class="code_container">
<div><div id="highlighter_36294" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:articles</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:comments</code><code class="ruby plain">, shallow: </code><code class="ruby keyword">true</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will generate the exact same routes as the first example. You can also specify the <code>:shallow</code> option in the parent resource, in which case all of the nested resources will be shallow:</p><div class="code_container">
<div><div id="highlighter_123285" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:articles</code><code class="ruby plain">, shallow: </code><code class="ruby keyword">true</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:comments</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:quotes</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:drafts</code></div><div class="line number5 index4 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <code>shallow</code> method of the DSL creates a scope inside of 
which every nesting is shallow. This generates the same routes as the 
previous example:</p><div class="code_container">
<div><div id="highlighter_381415" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">shallow </code><code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:articles</code> <code class="ruby keyword">do</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:comments</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:quotes</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:drafts</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number7 index6 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>There exist two options for <code>scope</code> to customize shallow routes. <code>:shallow_path</code> prefixes member paths with the specified parameter:</p><div class="code_container">
<div><div id="highlighter_805720" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">scope shallow_path: </code><code class="ruby string">"sekret"</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:articles</code> <code class="ruby keyword">do</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:comments</code><code class="ruby plain">, shallow: </code><code class="ruby keyword">true</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number5 index4 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The comments resource here will have the following routes generated for it:</p>
<table class="responsive">
<thead>
<tr>
<th>HTTP Verb</th>
<th>Path</th>
<th>Controller#Action</th>
<th>Named Helper</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/articles/:article_id/comments(.:format)</td>
<td>comments#index</td>
<td>article_comments_path</td>
</tr>
<tr>
<td>POST</td>
<td>/articles/:article_id/comments(.:format)</td>
<td>comments#create</td>
<td>article_comments_path</td>
</tr>
<tr>
<td>GET</td>
<td>/articles/:article_id/comments/new(.:format)</td>
<td>comments#new</td>
<td>new_article_comment_path</td>
</tr>
<tr>
<td>GET</td>
<td>/sekret/comments/:id/edit(.:format)</td>
<td>comments#edit</td>
<td>edit_comment_path</td>
</tr>
<tr>
<td>GET</td>
<td>/sekret/comments/:id(.:format)</td>
<td>comments#show</td>
<td>comment_path</td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td>/sekret/comments/:id(.:format)</td>
<td>comments#update</td>
<td>comment_path</td>
</tr>
<tr>
<td>DELETE</td>
<td>/sekret/comments/:id(.:format)</td>
<td>comments#destroy</td>
<td>comment_path</td>
</tr>
</tbody>
</table>
<p>The <code>:shallow_prefix</code> option adds the specified parameter to the named helpers:</p><div class="code_container">
<div><div id="highlighter_692707" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">scope shallow_prefix: </code><code class="ruby string">"sekret"</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:articles</code> <code class="ruby keyword">do</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:comments</code><code class="ruby plain">, shallow: </code><code class="ruby keyword">true</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number5 index4 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The comments resource here will have the following routes generated for it:</p>
<table class="responsive">
<thead>
<tr>
<th>HTTP Verb</th>
<th>Path</th>
<th>Controller#Action</th>
<th>Named Helper</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/articles/:article_id/comments(.:format)</td>
<td>comments#index</td>
<td>article_comments_path</td>
</tr>
<tr>
<td>POST</td>
<td>/articles/:article_id/comments(.:format)</td>
<td>comments#create</td>
<td>article_comments_path</td>
</tr>
<tr>
<td>GET</td>
<td>/articles/:article_id/comments/new(.:format)</td>
<td>comments#new</td>
<td>new_article_comment_path</td>
</tr>
<tr>
<td>GET</td>
<td>/comments/:id/edit(.:format)</td>
<td>comments#edit</td>
<td>edit_sekret_comment_path</td>
</tr>
<tr>
<td>GET</td>
<td>/comments/:id(.:format)</td>
<td>comments#show</td>
<td>sekret_comment_path</td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td>/comments/:id(.:format)</td>
<td>comments#update</td>
<td>sekret_comment_path</td>
</tr>
<tr>
<td>DELETE</td>
<td>/comments/:id(.:format)</td>
<td>comments#destroy</td>
<td>sekret_comment_path</td>
</tr>
</tbody>
</table>
<h4 id="routing-concerns">2.8 Routing concerns</h4><p>Routing Concerns allows you to declare common routes that can be reused inside other resources and routes. To define a concern:</p><div class="code_container">
<div><div id="highlighter_64146" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">concern </code><code class="ruby color2">:commentable</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:comments</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby plain">concern </code><code class="ruby color2">:image_attachable</code> <code class="ruby keyword">do</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:images</code><code class="ruby plain">, only: </code><code class="ruby color2">:index</code></div><div class="line number7 index6 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>These concerns can be used in resources to avoid code duplication and share behavior across routes:</p><div class="code_container">
<div><div id="highlighter_598479" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:messages</code><code class="ruby plain">, concerns: </code><code class="ruby color2">:commentable</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:articles</code><code class="ruby plain">, concerns: [</code><code class="ruby color2">:commentable</code><code class="ruby plain">, </code><code class="ruby color2">:image_attachable</code><code class="ruby plain">]</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The above is equivalent to:</p><div class="code_container">
<div><div id="highlighter_239408" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:messages</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:comments</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:articles</code> <code class="ruby keyword">do</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:comments</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:images</code><code class="ruby plain">, only: </code><code class="ruby color2">:index</code></div><div class="line number8 index7 alt1"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Also you can use them in any place that you want inside the routes, for example in a scope or namespace call:</p><div class="code_container">
<div><div id="highlighter_116849" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">namespace </code><code class="ruby color2">:articles</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">concerns </code><code class="ruby color2">:commentable</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4 id="creating-paths-and-urls-from-objects">2.9 Creating Paths and URLs From Objects</h4><p>In
 addition to using the routing helpers, Rails can also create paths and 
URLs from an array of parameters. For example, suppose you have this set
 of routes:</p><div class="code_container">
<div><div id="highlighter_534593" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:magazines</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:ads</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>When using <code>magazine_ad_path</code>, you can pass in instances of <code>Magazine</code> and <code>Ad</code> instead of the numeric IDs:</p><div class="code_container">
<div><div id="highlighter_592321" class="syntaxhighlighter nogutter  htmlscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">link_to </code><code class="ruby string">'Ad details'</code><code class="ruby plain">, magazine_ad_path(</code><code class="ruby variable bold">@magazine</code><code class="ruby plain">, </code><code class="ruby variable bold">@ad</code><code class="ruby plain">) </code><code class="ruby script">%&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>You can also use <code>url_for</code> with a set of objects, and Rails will automatically determine which route you want:</p><div class="code_container">
<div><div id="highlighter_118060" class="syntaxhighlighter nogutter  htmlscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">link_to </code><code class="ruby string">'Ad details'</code><code class="ruby plain">, url_for([</code><code class="ruby variable bold">@magazine</code><code class="ruby plain">, </code><code class="ruby variable bold">@ad</code><code class="ruby plain">]) </code><code class="ruby script">%&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>In this case, Rails will see that <code>@magazine</code> is a <code>Magazine</code> and <code>@ad</code> is an <code>Ad</code> and will therefore use the <code>magazine_ad_path</code> helper. In helpers like <code>link_to</code>, you can specify just the object in place of the full <code>url_for</code> call:</p><div class="code_container">
<div><div id="highlighter_364660" class="syntaxhighlighter nogutter  htmlscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">link_to </code><code class="ruby string">'Ad details'</code><code class="ruby plain">, [</code><code class="ruby variable bold">@magazine</code><code class="ruby plain">, </code><code class="ruby variable bold">@ad</code><code class="ruby plain">] </code><code class="ruby script">%&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>If you wanted to link to just a magazine:</p><div class="code_container">
<div><div id="highlighter_128582" class="syntaxhighlighter nogutter  htmlscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">link_to </code><code class="ruby string">'Magazine details'</code><code class="ruby plain">, </code><code class="ruby variable bold">@magazine</code> <code class="ruby script">%&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>For other actions, you just need to insert the action name as the first element of the array:</p><div class="code_container">
<div><div id="highlighter_679113" class="syntaxhighlighter nogutter  htmlscript"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">link_to </code><code class="ruby string">'Edit Ad'</code><code class="ruby plain">, [</code><code class="ruby color2">:edit</code><code class="ruby plain">, </code><code class="ruby variable bold">@magazine</code><code class="ruby plain">, </code><code class="ruby variable bold">@ad</code><code class="ruby plain">] </code><code class="ruby script">%&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This allows you to treat instances of your models as URLs, and is a key advantage to using the resourceful style.</p><h4 id="adding-more-restful-actions">2.10 Adding More RESTful Actions</h4><p>You
 are not limited to the seven routes that RESTful routing creates by 
default. If you like, you may add additional routes that apply to the 
collection or individual members of the collection.</p><h5 id="adding-member-routes">2.10.1 Adding Member Routes</h5><p>To add a member route, just add a <code>member</code> block into the resource block:</p><div class="code_container">
<div><div id="highlighter_722823" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">member </code><code class="ruby keyword">do</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">get </code><code class="ruby string">'preview'</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number5 index4 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will recognize <code>/photos/1/preview</code> with GET, and route to the <code>preview</code> action of <code>PhotosController</code>, with the resource id value passed in <code>params[:id]</code>. It will also create the <code>preview_photo_url</code> and <code>preview_photo_path</code> helpers.</p><p>Within the block of member routes, each route name specifies the HTTP verb
will be recognized. You can use <code>get</code>, <code>patch</code>, <code>put</code>, <code>post</code>, or <code>delete</code> here
. If you don't have multiple <code>member</code> routes, you can also pass <code>:on</code> to a
route, eliminating the block:</p><div class="code_container">
<div><div id="highlighter_975798" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">get </code><code class="ruby string">'preview'</code><code class="ruby plain">, on: </code><code class="ruby color2">:member</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>You can leave out the <code>:on</code> option, this will create the same member route except that the resource id value will be available in <code>params[:photo_id]</code> instead of <code>params[:id]</code>.</p><h5 id="adding-collection-routes">2.10.2 Adding Collection Routes</h5><p>To add a route to the collection:</p><div class="code_container">
<div><div id="highlighter_943994" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">collection </code><code class="ruby keyword">do</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">get </code><code class="ruby string">'search'</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number5 index4 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will enable Rails to recognize paths such as <code>/photos/search</code> with GET, and route to the <code>search</code> action of <code>PhotosController</code>. It will also create the <code>search_photos_url</code> and <code>search_photos_path</code> route helpers.</p><p>Just as with member routes, you can pass <code>:on</code> to a route:</p><div class="code_container">
<div><div id="highlighter_766793" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">get </code><code class="ruby string">'search'</code><code class="ruby plain">, on: </code><code class="ruby color2">:collection</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<h5 id="adding-routes-for-additional-new-actions">2.10.3 Adding Routes for Additional New Actions</h5><p>To add an alternate new action using the <code>:on</code> shortcut:</p><div class="code_container">
<div><div id="highlighter_640865" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:comments</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">get </code><code class="ruby string">'preview'</code><code class="ruby plain">, on: </code><code class="ruby color2">:new</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will enable Rails to recognize paths such as <code>/comments/new/preview</code> with GET, and route to the <code>preview</code> action of <code>CommentsController</code>. It will also create the <code>preview_new_comment_url</code> and <code>preview_new_comment_path</code> route helpers.</p><div class="info"><p>If
 you find yourself adding many extra actions to a resourceful route, 
it's time to stop and ask yourself whether you're disguising the 
presence of another resource.</p></div><h3 id="non-resourceful-routes">3 Non-Resourceful Routes</h3><p>In
 addition to resource routing, Rails has powerful support for routing 
arbitrary URLs to actions. Here, you don't get groups of routes 
automatically generated by resourceful routing. Instead, you set up each
 route within your application separately.</p><p>While you should 
usually use resourceful routing, there are still many places where the 
simpler routing is more appropriate. There's no need to try to shoehorn 
every last piece of your application into a resourceful framework if 
that's not a good fit.</p><p>In particular, simple routing makes it very easy to map legacy URLs to new Rails actions.</p><h4 id="bound-parameters">3.1 Bound Parameters</h4><p>When
 you set up a regular route, you supply a series of symbols that Rails 
maps to parts of an incoming HTTP request. Two of these symbols are 
special: <code>:controller</code> maps to the name of a controller in your application, and <code>:action</code> maps to the name of an action within that controller. For example, consider this route:</p><div class="code_container">
<div><div id="highlighter_252767" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">':controller(/:action(/:id))'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>If an incoming request of <code>/photos/show/1</code> is processed by this route (because it hasn't matched any previous route in the file), then the result will be to invoke the <code>show</code> action of the <code>PhotosController</code>, and to make the final parameter <code>"1"</code> available as <code>params[:id]</code>. This route will also route the incoming request of <code>/photos</code> to <code>PhotosController#index</code>, since <code>:action</code> and <code>:id</code> are optional parameters, denoted by parentheses.</p><h4 id="dynamic-segments">3.2 Dynamic Segments</h4><p>You can set up as many dynamic segments within a regular route as you like. Anything other than <code>:controller</code> or <code>:action</code> will be available to the action as part of <code>params</code>. If you set up this route:</p><div class="code_container">
<div><div id="highlighter_647805" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">':controller/:action/:id/:user_id'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>An incoming path of <code>/photos/show/1/2</code> will be dispatched to the <code>show</code> action of the <code>PhotosController</code>. <code>params[:id]</code> will be <code>"1"</code>, and <code>params[:user_id]</code> will be <code>"2"</code>.</p><div class="note"><p>You can't use <code>:namespace</code> or <code>:module</code> with a <code>:controller</code> path segment. If you need to do this then use a constraint on :controller that matches the namespace you require. e.g:</p></div><div class="code_container">
<div><div id="highlighter_718290" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">':controller(/:action(/:id))'</code><code class="ruby plain">, controller: /admin\/[^\/]+/</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="info"><p>By default, dynamic segments don't accept dots - 
this is because the dot is used as a separator for formatted routes. If 
you need to use a dot within a dynamic segment, add a constraint that 
overrides this – for example, <code>id: /[^\/]+/</code> allows anything except a slash.</p></div><h4 id="static-segments">3.3 Static Segments</h4><p>You can specify static segments when creating a route by not prepending a colon to a fragment:</p><div class="code_container">
<div><div id="highlighter_934823" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">':controller/:action/:id/with_user/:user_id'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This route would respond to paths such as <code>/photos/show/1/with_user/2</code>. In this case, <code>params</code> would be <code>{ controller: 'photos', action: 'show', id: '1', user_id: '2' }</code>.</p><h4 id="the-query-string">3.4 The Query String</h4><p>The <code>params</code> will also include any parameters from the query string. For example, with this route:</p><div class="code_container">
<div><div id="highlighter_537948" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">':controller/:action/:id'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>An incoming path of <code>/photos/show/1?user_id=2</code> will be dispatched to the <code>show</code> action of the <code>Photos</code> controller. <code>params</code> will be <code>{ controller: 'photos', action: 'show', id: '1', user_id: '2' }</code>.</p><h4 id="defining-defaults">3.5 Defining Defaults</h4><p>You do not need to explicitly use the <code>:controller</code> and <code>:action</code> symbols within a route. You can supply them as defaults:</p><div class="code_container">
<div><div id="highlighter_952403" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'photos/:id'</code><code class="ruby plain">, to: </code><code class="ruby string">'photos#show'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>With this route, Rails will match an incoming path of <code>/photos/12</code> to the <code>show</code> action of <code>PhotosController</code>.</p><p>You can also define other defaults in a route by supplying a hash for the <code>:defaults</code> option. This even applies to parameters that you do not specify as dynamic segments. For example:</p><div class="code_container">
<div><div id="highlighter_426895" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'photos/:id'</code><code class="ruby plain">, to: </code><code class="ruby string">'photos#show'</code><code class="ruby plain">, defaults: { format: </code><code class="ruby string">'jpg'</code> <code class="ruby plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Rails would match <code>photos/12</code> to the <code>show</code> action of <code>PhotosController</code>, and set <code>params[:format]</code> to <code>"jpg"</code>.</p><h4 id="naming-routes">3.6 Naming Routes</h4><p>You can specify a name for any route using the <code>:as</code> option:</p><div class="code_container">
<div><div id="highlighter_196076" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'exit'</code><code class="ruby plain">, to: </code><code class="ruby string">'sessions#destroy'</code><code class="ruby plain">, as: </code><code class="ruby color2">:logout</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will create <code>logout_path</code> and <code>logout_url</code> as named helpers in your application. Calling <code>logout_path</code> will return <code>/exit</code></p><p>You can also use this to override routing methods defined by resources, like this:</p><div class="code_container">
<div><div id="highlighter_872354" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">':username'</code><code class="ruby plain">, to: </code><code class="ruby string">'users#show'</code><code class="ruby plain">, as: </code><code class="ruby color2">:user</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will define a <code>user_path</code> method that will be available in controllers, helpers and views that will go to a route such as <code>/bob</code>. Inside the <code>show</code> action of <code>UsersController</code>, <code>params[:username]</code> will contain the username for the user. Change <code>:username</code> in the route definition if you do not want your parameter name to be <code>:username</code>.</p><h4 id="http-verb-constraints">3.7 HTTP Verb Constraints</h4><p>In general, you should use the <code>get</code>, <code>post</code>, <code>put</code>, <code>patch</code>  and <code>delete</code> methods to constrain a route to a particular verb. You can use the <code>match</code> method with the <code>:via</code> option to match multiple verbs at once:</p><div class="code_container">
<div><div id="highlighter_382237" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">match </code><code class="ruby string">'photos'</code><code class="ruby plain">, to: </code><code class="ruby string">'photos#show'</code><code class="ruby plain">, via: [</code><code class="ruby color2">:get</code><code class="ruby plain">, </code><code class="ruby color2">:post</code><code class="ruby plain">]</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>You can match all verbs to a particular route using <code>via: :all</code>:</p><div class="code_container">
<div><div id="highlighter_620904" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">match </code><code class="ruby string">'photos'</code><code class="ruby plain">, to: </code><code class="ruby string">'photos#show'</code><code class="ruby plain">, via: </code><code class="ruby color2">:all</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="note"><p>Routing both <code>GET</code> and <code>POST</code> requests to a single action has security implications. In general, you should avoid routing all verbs to an action unless you have a good reason to.</p></div><div class="note"><p>'GET' in Rails won't check for CSRF token. You should never write to the database from 'GET' requests, for more information see the <a href="http://guides.rubyonrails.org/security.html#csrf-countermeasures">security guide</a> on CSRF countermeasures.</p></div><h4 id="segment-constraints">3.8 Segment Constraints</h4><p>You can use the <code>:constraints</code> option to enforce a format for a dynamic segment:</p><div class="code_container">
<div><div id="highlighter_107604" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'photos/:id'</code><code class="ruby plain">, to: </code><code class="ruby string">'photos#show'</code><code class="ruby plain">, constraints: { id: /[</code><code class="ruby constants">A</code><code class="ruby plain">-</code><code class="ruby constants">Z</code><code class="ruby plain">]\d{</code><code class="ruby constants">5</code><code class="ruby plain">}/ }</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This route would match paths such as <code>/photos/A12345</code>, but not <code>/photos/893</code>. You can more succinctly express the same route this way:</p><div class="code_container">
<div><div id="highlighter_694340" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'photos/:id'</code><code class="ruby plain">, to: </code><code class="ruby string">'photos#show'</code><code class="ruby plain">, id: /[</code><code class="ruby constants">A</code><code class="ruby plain">-</code><code class="ruby constants">Z</code><code class="ruby plain">]\d{</code><code class="ruby constants">5</code><code class="ruby plain">}/</code></div></div></td></tr></tbody></table></div></div>
</div>
<p><code>:constraints</code> takes regular expressions with the 
restriction that regexp anchors can't be used. For example, the 
following route will not work:</p><div class="code_container">
<div><div id="highlighter_523451" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'/:id'</code><code class="ruby plain">, to: </code><code class="ruby string">'articles#show'</code><code class="ruby plain">, constraints: { id: /^\d/ }</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>However, note that you don't need to use anchors because all routes are anchored at the start.</p><p>For example, the following routes would allow for <code>articles</code> with <code>to_param</code> values like <code>1-hello-world</code> that always begin with a number and <code>users</code> with <code>to_param</code> values like <code>david</code> that never begin with a number to share the root namespace:</p><div class="code_container">
<div><div id="highlighter_829693" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'/:id'</code><code class="ruby plain">, to: </code><code class="ruby string">'articles#show'</code><code class="ruby plain">, constraints: { id: /\d.+/ }</code></div><div class="line number2 index1 alt1"><code class="ruby plain">get </code><code class="ruby string">'/:username'</code><code class="ruby plain">, to: </code><code class="ruby string">'users#show'</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4 id="request-based-constraints">3.9 Request-Based Constraints</h4><p>You can also constrain a route based on any method on the <a href="http://guides.rubyonrails.org/action_controller_overview.html#the-request-object">Request object</a> that returns a <code>String</code>.</p><p>You specify a request-based constraint the same way that you specify a segment constraint:</p><div class="code_container">
<div><div id="highlighter_221285" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'photos'</code><code class="ruby plain">, to: </code><code class="ruby string">'photos#index'</code><code class="ruby plain">, constraints: { subdomain: </code><code class="ruby string">'admin'</code> <code class="ruby plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>You can also specify constraints in a block form:</p><div class="code_container">
<div><div id="highlighter_42166" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">namespace </code><code class="ruby color2">:admin</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">constraints subdomain: </code><code class="ruby string">'admin'</code> <code class="ruby keyword">do</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:photos</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number5 index4 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="note"><p>Request constraints work by calling a method on the <a href="http://guides.rubyonrails.org/action_controller_overview.html#the-request-object">Request object</a>
 with the same name as the hash key and then compare the return value 
with the hash value. Therefore, constraint values should match the 
corresponding Request object method return type. For example: <code>constraints: { subdomain: 'api' }</code> will match an <code>api</code> subdomain as expected, however using a symbol <code>constraints: { subdomain: :api }</code> will not, because <code>request.subdomain</code> returns <code>'api'</code> as a String.</p></div><h4 id="advanced-constraints">3.10 Advanced Constraints</h4><p>If you have a more advanced constraint, you can provide an object that responds to <code>matches?</code> that Rails should use. Let's say you wanted to route all users on a blacklist to the <code>BlacklistController</code>. You could do:</p><div class="code_container">
<div><div id="highlighter_43895" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">BlacklistConstraint</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">initialize</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">@ips</code> <code class="ruby plain">= Blacklist.retrieve_ips</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">matches?(request)</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">@ips</code><code class="ruby plain">.include?(request.remote_ip)</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number9 index8 alt2"><code class="ruby keyword">end</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="ruby plain">Rails.application.routes.draw </code><code class="ruby keyword">do</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">get </code><code class="ruby string">'*path'</code><code class="ruby plain">, to: </code><code class="ruby string">'blacklist#index'</code><code class="ruby plain">,</code></div><div class="line number13 index12 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">constraints: BlacklistConstraint.</code><code class="ruby keyword">new</code></div><div class="line number14 index13 alt1"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>You can also specify constraints as a lambda:</p><div class="code_container">
<div><div id="highlighter_389673" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">Rails.application.routes.draw </code><code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">get </code><code class="ruby string">'*path'</code><code class="ruby plain">, to: </code><code class="ruby string">'blacklist#index'</code><code class="ruby plain">,</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">constraints: lambda { |request| Blacklist.retrieve_ips.include?(request.remote_ip) }</code></div><div class="line number4 index3 alt1"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Both the <code>matches?</code> method and the lambda gets the <code>request</code> object as an argument.</p><h4 id="route-globbing-and-wildcard-segments">3.11 Route Globbing and Wildcard Segments</h4><p>Route
 globbing is a way to specify that a particular parameter should be 
matched to all the remaining parts of a route. For example:</p><div class="code_container">
<div><div id="highlighter_14873" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'photos/*other'</code><code class="ruby plain">, to: </code><code class="ruby string">'photos#unknown'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This route would match <code>photos/12</code> or <code>/photos/long/path/to/12</code>, setting <code>params[:other]</code> to <code>"12"</code> or <code>"long/path/to/12"</code>. The fragments prefixed with a star are called "wildcard segments".</p><p>Wildcard segments can occur anywhere in a route. For example:</p><div class="code_container">
<div><div id="highlighter_61225" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'books/*section/:title'</code><code class="ruby plain">, to: </code><code class="ruby string">'books#show'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>would match <code>books/some/section/last-words-a-memoir</code> with <code>params[:section]</code> equals <code>'some/section'</code>, and <code>params[:title]</code> equals <code>'last-words-a-memoir'</code>.</p><p>Technically,
 a route can have even more than one wildcard segment. The matcher 
assigns segments to parameters in an intuitive way. For example:</p><div class="code_container">
<div><div id="highlighter_646858" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'*a/foo/*b'</code><code class="ruby plain">, to: </code><code class="ruby string">'test#index'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>would match <code>zoo/woo/foo/bar/baz</code> with <code>params[:a]</code> equals <code>'zoo/woo'</code>, and <code>params[:b]</code> equals <code>'bar/baz'</code>.</p><div class="note"><p>By requesting <code>'/foo/bar.json'</code>, your <code>params[:pages]</code> will be equal to <code>'foo/bar'</code> with the request format of JSON. If you want the old 3.0.x behavior back, you could supply <code>format: false</code> like this:</p></div><div class="code_container">
<div><div id="highlighter_846112" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'*pages'</code><code class="ruby plain">, to: </code><code class="ruby string">'pages#show'</code><code class="ruby plain">, format: </code><code class="ruby keyword">false</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="note"><p>If you want to make the format segment mandatory, so it cannot be omitted, you can supply <code>format: true</code> like this:</p></div><div class="code_container">
<div><div id="highlighter_935437" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'*pages'</code><code class="ruby plain">, to: </code><code class="ruby string">'pages#show'</code><code class="ruby plain">, format: </code><code class="ruby keyword">true</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4 id="redirection">3.12 Redirection</h4><p>You can redirect any path to another path using the <code>redirect</code> helper in your router:</p><div class="code_container">
<div><div id="highlighter_484919" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'/stories'</code><code class="ruby plain">, to: redirect(</code><code class="ruby string">'/articles'</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>You can also reuse dynamic segments from the match in the path to redirect to:</p><div class="code_container">
<div><div id="highlighter_779130" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'/stories/:name'</code><code class="ruby plain">, to: redirect(</code><code class="ruby string">'/articles/%{name}'</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>You can also provide a block to redirect, which receives the symbolized path parameters and the request object:</p><div class="code_container">
<div><div id="highlighter_615601" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'/stories/:name'</code><code class="ruby plain">, to: redirect { |path_params, req| </code><code class="ruby string">"/articles/#{path_params[:name].pluralize}"</code> <code class="ruby plain">}</code></div><div class="line number2 index1 alt1"><code class="ruby plain">get </code><code class="ruby string">'/stories'</code><code class="ruby plain">, to: redirect { |path_params, req| </code><code class="ruby string">"/articles/#{req.subdomain}"</code> <code class="ruby plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Please note that this redirection is a 301 "Moved Permanently" 
redirect. Keep in mind that some web browsers or proxy servers will 
cache this type of redirect, making the old page inaccessible.</p><p>In all of these cases, if you don't provide the leading host (<code>http://www.example.com</code>), Rails will take those details from the current request.</p><h4 id="routing-to-rack-applications">3.13 Routing to Rack Applications</h4><p>Instead of a String like <code>'articles#index'</code>, which corresponds to the <code>index</code> action in the <code>ArticlesController</code>, you can specify any <a href="http://guides.rubyonrails.org/rails_on_rack.html">Rack application</a> as the endpoint for a matcher:</p><div class="code_container">
<div><div id="highlighter_58972" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">match </code><code class="ruby string">'/application.js'</code><code class="ruby plain">, to: Sprockets, via: </code><code class="ruby color2">:all</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>As long as <code>Sprockets</code> responds to <code>call</code> and returns a <code>[status, headers, body]</code>, the router won't know the difference between the Rack application and an action. This is an appropriate use of <code>via: :all</code>, as you will want to allow your Rack application to handle all verbs as it considers appropriate.</p><div class="note"><p>For the curious, <code>'articles#index'</code> actually expands out to <code>ArticlesController.action(:index)</code>, which returns a valid Rack application.</p></div><h4 id="using-root">3.14 Using <code>root</code>
</h4><p>You can specify what Rails should route <code>'/'</code> to with the <code>root</code> method:</p><div class="code_container">
<div><div id="highlighter_157555" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">root to: </code><code class="ruby string">'pages#main'</code></div><div class="line number2 index1 alt1"><code class="ruby plain">root </code><code class="ruby string">'pages#main'</code> <code class="ruby plain"># shortcut </code><code class="ruby keyword">for</code> <code class="ruby plain">the above</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>You should put the <code>root</code> route at the top of the file, because it is the most popular route and should be matched first.</p><div class="note"><p>The <code>root</code> route only routes <code>GET</code> requests to the action.</p></div><p>You can also use root inside namespaces and scopes as well. For example:</p><div class="code_container">
<div><div id="highlighter_352444" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">namespace </code><code class="ruby color2">:admin</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">root to: </code><code class="ruby string">"admin#index"</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby plain">root to: </code><code class="ruby string">"home#index"</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4 id="unicode-character-routes">3.15 Unicode character routes</h4><p>You can specify unicode character routes directly. For example:</p><div class="code_container">
<div><div id="highlighter_313979" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">get </code><code class="ruby string">'こんにちは'</code><code class="ruby plain">, to: </code><code class="ruby string">'welcome#index'</code></div></div></td></tr></tbody></table></div></div>
</div>
<h3 id="customizing-resourceful-routes">4 Customizing Resourceful Routes</h3><p>While the default routes and helpers generated by <code>resources :articles</code>
 will usually serve you well, you may want to customize them in some 
way. Rails allows you to customize virtually any generic part of the 
resourceful helpers.</p><h4 id="specifying-a-controller-to-use">4.1 Specifying a Controller to Use</h4><p>The <code>:controller</code> option lets you explicitly specify a controller to use for the resource. For example:</p><div class="code_container">
<div><div id="highlighter_199910" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code><code class="ruby plain">, controller: </code><code class="ruby string">'images'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>will recognize incoming paths beginning with <code>/photos</code> but route to the <code>Images</code> controller:</p>
<table class="responsive">
<thead>
<tr>
<th>HTTP Verb</th>
<th>Path</th>
<th>Controller#Action</th>
<th>Named Helper</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/photos</td>
<td>images#index</td>
<td>photos_path</td>
</tr>
<tr>
<td>GET</td>
<td>/photos/new</td>
<td>images#new</td>
<td>new_photo_path</td>
</tr>
<tr>
<td>POST</td>
<td>/photos</td>
<td>images#create</td>
<td>photos_path</td>
</tr>
<tr>
<td>GET</td>
<td>/photos/:id</td>
<td>images#show</td>
<td>photo_path(:id)</td>
</tr>
<tr>
<td>GET</td>
<td>/photos/:id/edit</td>
<td>images#edit</td>
<td>edit_photo_path(:id)</td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td>/photos/:id</td>
<td>images#update</td>
<td>photo_path(:id)</td>
</tr>
<tr>
<td>DELETE</td>
<td>/photos/:id</td>
<td>images#destroy</td>
<td>photo_path(:id)</td>
</tr>
</tbody>
</table>
<div class="note"><p>Use <code>photos_path</code>, <code>new_photo_path</code>, etc. to generate paths for this resource.</p></div><p>For namespaced controllers you can use the directory notation. For example:</p><div class="code_container">
<div><div id="highlighter_598334" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:user_permissions</code><code class="ruby plain">, controller: </code><code class="ruby string">'admin/user_permissions'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will route to the <code>Admin::UserPermissions</code> controller.</p><div class="note"><p>Only the directory notation is supported. Specifying the
controller with Ruby constant notation (eg. <code>controller: 'Admin::UserPermissions'</code>)
can lead to routing problems and results in
a warning.</p></div><h4 id="specifying-constraints">4.2 Specifying Constraints</h4><p>You can use the <code>:constraints</code> option to specify a required format on the implicit <code>id</code>. For example:</p><div class="code_container">
<div><div id="highlighter_957085" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code><code class="ruby plain">, constraints: { id: /[</code><code class="ruby constants">A</code><code class="ruby plain">-</code><code class="ruby constants">Z</code><code class="ruby plain">][</code><code class="ruby constants">A</code><code class="ruby plain">-</code><code class="ruby constants">Z</code><code class="ruby plain">][</code><code class="ruby constants">0</code><code class="ruby plain">-</code><code class="ruby constants">9</code><code class="ruby plain">]+/ }</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This declaration constrains the <code>:id</code> parameter to match the supplied regular expression. So, in this case, the router would no longer match <code>/photos/1</code> to this route. Instead, <code>/photos/RR27</code> would match.</p><p>You can specify a single constraint to apply to a number of routes by using the block form:</p><div class="code_container">
<div><div id="highlighter_725827" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">constraints(id: /[</code><code class="ruby constants">A</code><code class="ruby plain">-</code><code class="ruby constants">Z</code><code class="ruby plain">][</code><code class="ruby constants">A</code><code class="ruby plain">-</code><code class="ruby constants">Z</code><code class="ruby plain">][</code><code class="ruby constants">0</code><code class="ruby plain">-</code><code class="ruby constants">9</code><code class="ruby plain">]+/) </code><code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:photos</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:accounts</code></div><div class="line number4 index3 alt1"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="note"><p>Of course, you can use the more advanced constraints available in non-resourceful routes in this context.</p></div><div class="info"><p>By default the <code>:id</code>
 parameter doesn't accept dots - this is because the dot is used as a 
separator for formatted routes. If you need to use a dot within an <code>:id</code> add a constraint which overrides this - for example <code>id: /[^\/]+/</code> allows anything except a slash.</p></div><h4 id="overriding-the-named-helpers">4.3 Overriding the Named Helpers</h4><p>The <code>:as</code> option lets you override the normal naming for the named route helpers. For example:</p><div class="code_container">
<div><div id="highlighter_789698" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code><code class="ruby plain">, as: </code><code class="ruby string">'images'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>will recognize incoming paths beginning with <code>/photos</code> and route the requests to <code>PhotosController</code>, but use the value of the :as option to name the helpers.</p>
<table class="responsive">
<thead>
<tr>
<th>HTTP Verb</th>
<th>Path</th>
<th>Controller#Action</th>
<th>Named Helper</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/photos</td>
<td>photos#index</td>
<td>images_path</td>
</tr>
<tr>
<td>GET</td>
<td>/photos/new</td>
<td>photos#new</td>
<td>new_image_path</td>
</tr>
<tr>
<td>POST</td>
<td>/photos</td>
<td>photos#create</td>
<td>images_path</td>
</tr>
<tr>
<td>GET</td>
<td>/photos/:id</td>
<td>photos#show</td>
<td>image_path(:id)</td>
</tr>
<tr>
<td>GET</td>
<td>/photos/:id/edit</td>
<td>photos#edit</td>
<td>edit_image_path(:id)</td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td>/photos/:id</td>
<td>photos#update</td>
<td>image_path(:id)</td>
</tr>
<tr>
<td>DELETE</td>
<td>/photos/:id</td>
<td>photos#destroy</td>
<td>image_path(:id)</td>
</tr>
</tbody>
</table>
<h4 id="overriding-the-new-and-edit-segments">4.4 Overriding the <code>new</code> and <code>edit</code> Segments</h4><p>The <code>:path_names</code> option lets you override the automatically-generated <code>new</code> and <code>edit</code> segments in paths:</p><div class="code_container">
<div><div id="highlighter_67395" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code><code class="ruby plain">, path_names: { </code><code class="ruby keyword">new</code><code class="ruby plain">: </code><code class="ruby string">'make'</code><code class="ruby plain">, edit: </code><code class="ruby string">'change'</code> <code class="ruby plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This would cause the routing to recognize paths such as:</p><div class="code_container">
<div><div id="highlighter_47452" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">/photos/make</code></div><div class="line number2 index1 alt1"><code class="plain plain">/photos/1/change</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="note"><p>The actual action names aren't changed by this option. The two paths shown would still route to the <code>new</code> and <code>edit</code> actions.</p></div><div class="info"><p>If you find yourself wanting to change this option uniformly for all of your routes, you can use a scope.</p></div><div class="code_container">
<div><div id="highlighter_994160" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">scope path_names: { </code><code class="ruby keyword">new</code><code class="ruby plain">: </code><code class="ruby string">'make'</code> <code class="ruby plain">} </code><code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby comments"># rest of your routes</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4 id="prefixing-the-named-route-helpers">4.5 Prefixing the Named Route Helpers</h4><p>You can use the <code>:as</code>
 option to prefix the named route helpers that Rails generates for a 
route. Use this option to prevent name collisions between routes using a
 path scope. For example:</p><div class="code_container">
<div><div id="highlighter_610122" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">scope </code><code class="ruby string">'admin'</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:photos</code><code class="ruby plain">, as: </code><code class="ruby string">'admin_photos'</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will provide route helpers such as <code>admin_photos_path</code>, <code>new_admin_photo_path</code>, etc.</p><p>To prefix a group of route helpers, use <code>:as</code> with <code>scope</code>:</p><div class="code_container">
<div><div id="highlighter_588036" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">scope </code><code class="ruby string">'admin'</code><code class="ruby plain">, as: </code><code class="ruby string">'admin'</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:photos</code><code class="ruby plain">, </code><code class="ruby color2">:accounts</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code><code class="ruby plain">, </code><code class="ruby color2">:accounts</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will generate routes such as <code>admin_photos_path</code> and <code>admin_accounts_path</code> which map to <code>/admin/photos</code> and <code>/admin/accounts</code> respectively.</p><div class="note"><p>The <code>namespace</code> scope will automatically add <code>:as</code> as well as <code>:module</code> and <code>:path</code> prefixes.</p></div><p>You can prefix routes with a named parameter also:</p><div class="code_container">
<div><div id="highlighter_361538" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">scope </code><code class="ruby string">':username'</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:articles</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will provide you with URLs such as <code>/bob/articles/1</code> and will allow you to reference the <code>username</code> part of the path as <code>params[:username]</code> in controllers, helpers and views.</p><h4 id="restricting-the-routes-created">4.6 Restricting the Routes Created</h4><p>By default, Rails creates routes for the seven default actions (<code>index</code>, <code>show</code>, <code>new</code>, <code>create</code>, <code>edit</code>, <code>update</code>, and <code>destroy</code>) for every RESTful route in your application. You can use the <code>:only</code> and <code>:except</code> options to fine-tune this behavior. The <code>:only</code> option tells Rails to create only the specified routes:</p><div class="code_container">
<div><div id="highlighter_242771" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code><code class="ruby plain">, only: [</code><code class="ruby color2">:index</code><code class="ruby plain">, </code><code class="ruby color2">:show</code><code class="ruby plain">]</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Now, a <code>GET</code> request to <code>/photos</code> would succeed, but a <code>POST</code> request to <code>/photos</code> (which would ordinarily be routed to the <code>create</code> action) will fail.</p><p>The <code>:except</code> option specifies a route or list of routes that Rails should <em>not</em> create:</p><div class="code_container">
<div><div id="highlighter_514988" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:photos</code><code class="ruby plain">, except: </code><code class="ruby color2">:destroy</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>In this case, Rails will create all of the normal routes except the route for <code>destroy</code> (a <code>DELETE</code> request to <code>/photos/:id</code>).</p><div class="info"><p>If your application has many RESTful routes, using <code>:only</code> and <code>:except</code> to generate only the routes that you actually need can cut down on memory use and speed up the routing process.</p></div><h4 id="translated-paths">4.7 Translated Paths</h4><p>Using <code>scope</code>, we can alter path names generated by resources:</p><div class="code_container">
<div><div id="highlighter_903675" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">scope(path_names: { </code><code class="ruby keyword">new</code><code class="ruby plain">: </code><code class="ruby string">'neu'</code><code class="ruby plain">, edit: </code><code class="ruby string">'bearbeiten'</code> <code class="ruby plain">}) </code><code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:categories</code><code class="ruby plain">, path: </code><code class="ruby string">'kategorien'</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Rails now creates routes to the <code>CategoriesController</code>.</p>
<table class="responsive">
<thead>
<tr>
<th>HTTP Verb</th>
<th>Path</th>
<th>Controller#Action</th>
<th>Named Helper</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/kategorien</td>
<td>categories#index</td>
<td>categories_path</td>
</tr>
<tr>
<td>GET</td>
<td>/kategorien/neu</td>
<td>categories#new</td>
<td>new_category_path</td>
</tr>
<tr>
<td>POST</td>
<td>/kategorien</td>
<td>categories#create</td>
<td>categories_path</td>
</tr>
<tr>
<td>GET</td>
<td>/kategorien/:id</td>
<td>categories#show</td>
<td>category_path(:id)</td>
</tr>
<tr>
<td>GET</td>
<td>/kategorien/:id/bearbeiten</td>
<td>categories#edit</td>
<td>edit_category_path(:id)</td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td>/kategorien/:id</td>
<td>categories#update</td>
<td>category_path(:id)</td>
</tr>
<tr>
<td>DELETE</td>
<td>/kategorien/:id</td>
<td>categories#destroy</td>
<td>category_path(:id)</td>
</tr>
</tbody>
</table>
<h4 id="overriding-the-singular-form">4.8 Overriding the Singular Form</h4><p>If you want to define the singular form of a resource, you should add additional rules to the <code>Inflector</code>:</p><div class="code_container">
<div><div id="highlighter_399826" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">ActiveSupport::Inflector.inflections </code><code class="ruby keyword">do</code> <code class="ruby plain">|inflect|</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">inflect.irregular </code><code class="ruby string">'tooth'</code><code class="ruby plain">, </code><code class="ruby string">'teeth'</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4 id="using-as-in-nested-resources">4.9 Using <code>:as</code> in Nested Resources</h4><p>The <code>:as</code> option overrides the automatically-generated name for the resource in nested route helpers. For example:</p><div class="code_container">
<div><div id="highlighter_508680" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:magazines</code> <code class="ruby keyword">do</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">resources </code><code class="ruby color2">:ads</code><code class="ruby plain">, as: </code><code class="ruby string">'periodical_ads'</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This will create routing helpers such as <code>magazine_periodical_ads_url</code> and <code>edit_magazine_periodical_ad_path</code>.</p><h4 id="overriding-named-route-parameters">4.10 Overriding Named Route Parameters</h4><p>The <code>:param</code> option overrides the default resource identifier <code>:id</code> (name of
the <a href="http://guides.rubyonrails.org/routing.html#dynamic-segments">dynamic segment</a> used to generate the
routes). You can access that segment from your controller using
<code>params[&lt;:param&gt;]</code>.</p><div class="code_container">
<div><div id="highlighter_602820" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:videos</code><code class="ruby plain">, param: </code><code class="ruby color2">:identifier</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="code_container">
<div><div id="highlighter_403747" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">videos
 GET&nbsp; 
/videos(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 videos#index</code></div><div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">POST
 
/videos(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 videos#create</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;</code><code class="plain plain">new_videos
 GET&nbsp; 
/videos/new(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 videos#new</code></div><div class="line number4 index3 alt1"><code class="plain plain">edit_videos GET&nbsp; /videos/:identifier/edit(.:format) videos#edit</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="code_container">
<div><div id="highlighter_133779" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">Video.find_by(identifier: params[</code><code class="ruby color2">:identifier</code><code class="ruby plain">])</code></div></div></td></tr></tbody></table></div></div>
</div>
<h3 id="inspecting-and-testing-routes">5 Inspecting and Testing Routes</h3><p>Rails offers facilities for inspecting and testing your routes.</p><h4 id="listing-existing-routes">5.1 Listing Existing Routes</h4><p>To get a complete list of the available routes in your application, visit <code>http://localhost:3000/rails/info/routes</code> in your browser while your server is running in the <strong>development</strong> environment. You can also execute the <code>rake routes</code> command in your terminal to produce the same output.</p><p>Both methods will list all of your routes, in the same order that they appear in <code>routes.rb</code>. For each route, you'll see:</p>
<ul>
<li>The route name (if any)</li>
<li>The HTTP verb used (if the route doesn't respond to all verbs)</li>
<li>The URL pattern to match</li>
<li>The routing parameters for the route</li>
</ul>
<p>For example, here's a small section of the <code>rake routes</code> output for a RESTful route:</p><div class="code_container">
<div><div id="highlighter_558465" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">users GET&nbsp;&nbsp;&nbsp; /users(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; users#index</code></div><div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">POST&nbsp;&nbsp; /users(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; users#create</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;</code><code class="plain plain">new_user GET&nbsp;&nbsp;&nbsp; /users/new(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; users#new</code></div><div class="line number4 index3 alt1"><code class="plain plain">edit_user GET&nbsp;&nbsp;&nbsp; /users/:id/edit(.:format) users#edit</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>You may restrict the listing to the routes that map to a particular controller setting the <code>CONTROLLER</code> environment variable:</p><div class="code_container">
<div><div id="highlighter_913606" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">$ CONTROLLER=users bin/rake routes</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="info"><p>You'll find that the output from <code>rake routes</code> is much more readable if you widen your terminal window until the output lines don't wrap.</p></div><h4 id="testing-routes">5.2 Testing Routes</h4><p>Routes should be included in your testing strategy (just like the rest of your application). Rails offers three <a href="http://api.rubyonrails.org/classes/ActionDispatch/Assertions/RoutingAssertions.html">built-in assertions</a> designed to make testing routes simpler:</p>
<ul>
<li><code>assert_generates</code></li>
<li><code>assert_recognizes</code></li>
<li><code>assert_routing</code></li>
</ul>
<h5 id="the-assert-generates-assertion">5.2.1 The <code>assert_generates</code> Assertion</h5><p><code>assert_generates</code>
 asserts that a particular set of options generate a particular path and
 can be used with default routes or custom routes. For example:</p><div class="code_container">
<div><div id="highlighter_639670" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">assert_generates </code><code class="ruby string">'/photos/1'</code><code class="ruby plain">, { controller: </code><code class="ruby string">'photos'</code><code class="ruby plain">, action: </code><code class="ruby string">'show'</code><code class="ruby plain">, id: </code><code class="ruby string">'1'</code> <code class="ruby plain">}</code></div><div class="line number2 index1 alt1"><code class="ruby plain">assert_generates </code><code class="ruby string">'/about'</code><code class="ruby plain">, controller: </code><code class="ruby string">'pages'</code><code class="ruby plain">, action: </code><code class="ruby string">'about'</code></div></div></td></tr></tbody></table></div></div>
</div>
<h5 id="the-assert-recognizes-assertion">5.2.2 The <code>assert_recognizes</code> Assertion</h5><p><code>assert_recognizes</code> is the inverse of <code>assert_generates</code>. It asserts that a given path is recognized and routes it to a particular spot in your application. For example:</p><div class="code_container">
<div><div id="highlighter_240105" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">assert_recognizes({ controller: </code><code class="ruby string">'photos'</code><code class="ruby plain">, action: </code><code class="ruby string">'show'</code><code class="ruby plain">, id: </code><code class="ruby string">'1'</code> <code class="ruby plain">}, </code><code class="ruby string">'/photos/1'</code><code class="ruby plain">)</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>You can supply a <code>:method</code> argument to specify the HTTP verb:</p><div class="code_container">
<div><div id="highlighter_889757" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">assert_recognizes({ controller: </code><code class="ruby string">'photos'</code><code class="ruby plain">, action: </code><code class="ruby string">'create'</code> <code class="ruby plain">}, { path: </code><code class="ruby string">'photos'</code><code class="ruby plain">, method: </code><code class="ruby color2">:post</code> <code class="ruby plain">})</code></div></div></td></tr></tbody></table></div></div>
</div>
<h5 id="the-assert-routing-assertion">5.2.3 The <code>assert_routing</code> Assertion</h5><p>The <code>assert_routing</code>
 assertion checks the route both ways: it tests that the path generates 
the options, and that the options generate the path. Thus, it combines 
the functions of <code>assert_generates</code> and <code>assert_recognizes</code>:</p><div class="code_container">
<div><div id="highlighter_614222" class="syntaxhighlighter nogutter  ruby"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">assert_routing({ path: </code><code class="ruby string">'photos'</code><code class="ruby plain">, method: </code><code class="ruby color2">:post</code> <code class="ruby plain">}, { controller: </code><code class="ruby string">'photos'</code><code class="ruby plain">, action: </code><code class="ruby string">'create'</code> <code class="ruby plain">})</code></div></div></td></tr></tbody></table></div></div>
</div>


        <h3>Feedback</h3>
        <p>
          You're encouraged to help improve the quality of this guide.
        </p>
        <p>
          Please contribute if you see any typos or factual errors.
          To get started, you can read our <a href="http://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">documentation contributions</a> section.
        </p>
        <p>
          You may also find incomplete content, or stuff that is not up to date.
          Please do add any missing documentation for master. Make sure to check
          <a href="http://edgeguides.rubyonrails.org/">Edge Guides</a> first to verify
          if the issues are already fixed or not on the master branch.
          Check the <a href="http://guides.rubyonrails.org/ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a>
          for style and conventions.
        </p>
        <p>
          If for whatever reason you spot something to fix but cannot patch it yourself, please
          <a href="https://github.com/rails/rails/issues">open an issue</a>.
        </p>
        <p>And last but not least, any kind of discussion regarding Ruby on Rails
          documentation is very welcome in the <a href="http://groups.google.com/group/rubyonrails-docs">rubyonrails-docs mailing list</a>.
        </p>
      </div>
    </div>
  </div>

  <hr class="hide">
  <div id="footer">
    <div class="wrapper">
      <p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a> License</p>
<p>"Rails", "Ruby on Rails", and the Rails logo are trademarks of David Heinemeier Hansson. All rights reserved.</p>

    </div>
  </div>

  <script type="text/javascript" src="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/jquery.js"></script>
  <script type="text/javascript" src="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/responsive-tables.js"></script>
  <script type="text/javascript" src="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/guides.js"></script>
  <script type="text/javascript" src="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/shCore.js"></script>
  <script type="text/javascript" src="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/shBrushRuby.js"></script>
  <script type="text/javascript" src="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/shBrushXml.js"></script>
  <script type="text/javascript" src="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/shBrushSql.js"></script>
  <script type="text/javascript" src="Rails%20Routing%20from%20the%20Outside%20In%20%E2%80%94%20Ruby%20on%20Rails%20Guides_files/shBrushPlain.js"></script>
  <script type="text/javascript">
    SyntaxHighlighter.all();
    $(guidesIndex.bind);
  </script>


</body></html>